<!DOCTYPE html>
<html class="no-js" lang="fr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="initial-scale=1.0, width=device-width, maximum-scale=1.0">
    <title>WaxAffiliation.io</title>

    <link rel="preload" href="files/Site.min.css" as="style">
    <link rel="reload" href="files/style.min.css" as="style">
    <link rel="preload" href="files/sso-theme.min.css" as="style">
    <link href="files/Site.min.css" rel="stylesheet" type="text/css">
    <link href="files/style.min.css" rel="stylesheet" type="text/css">
    <link href="files/sso-theme.min.css" rel="stylesheet" type="text/css">
    <script src='waxjs.js'></script>







	<link rel="shortcut icon" href="files/favicon/favicon.ico" type="image/x-icon" />
	<link rel="icon" href="files/favicon/icon-16.png" sizes="16x16" />
	<link rel="icon" href="files/favicon/icon-32.png" sizes="32x32" />
	<link rel="icon" href="files/favicon/icon-48.png" sizes="48x48" />
	<link rel="icon" href="files/favicon/icon-96.png" sizes="96x96" />
	<link rel="icon" href="files/favicon/icon-144.png" sizes="144x144" />
	<!-- end meta block -->
	<script type="text/javascript" src="files/codebase/suite.js"></script>
	<link rel="stylesheet" href="files/codebase/suite.css">
	<link rel="stylesheet" href="files/index.css">
	<!-- custom sample head -->
	<script src="files/data.js"></script>



<script async src="https://www.googletagmanager.com/gtag/js?id=G-MVSCP5XW3H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MVSCP5XW3H');
</script>

<script>
var url_string = window.location.href;
var url = new URL(url_string);
var ref = url.searchParams.get("ref") || 'kkere.wam';
const affiliate_wallet = url.searchParams.get("ref") || 'kkere.wam';
</script>

<script src='waxjs.js'></script>
</head>
<body style="background-image: url('files/bg8.jpg');" align="center">
<center>
    
    
<script>
  const EventEmitter = require('events');
let eventNotifier = new EventEmitter();

const { Api, JsonRpc, RpcError } = require('eosjs');
const { JsSignatureProvider } = require('eosjs/dist/eosjs-jssig');      // development only
global.nativeFetch = require('node-fetch')
global.fetch = (url, args = {}) => {
  args.headers = args.headers || {}
  args.headers['user-agent'] = 'WakaBot - wax bridge. discord : Wapaca#6735';
  return nativeFetch(url, args)
}

global.WebSocket = require('ws')
const { TextEncoder, TextDecoder } = require('util');                   // node only; native TextEncoder/Decoder

const defaultPrivateKey = "5J44zzZ5AD66c9AJufaebB1W9gAdnS3A9ADHcnHyMKhC41SH6TD"; // bob
const signatureProvider = new JsSignatureProvider([defaultPrivateKey]);

const rpc = new JsonRpc('https://wax.greymass.com', { fetch });
const api = new Api({ rpc, signatureProvider, textDecoder: new TextDecoder(), textEncoder: new TextEncoder() });

function precise (x, y = 4) {
  return Number.parseFloat(x).toFixed(y);
}

var config = {
  'wallet' : 'remixplayer1', // wallet that will distribute token
};

const getBalance = async(contract, ticker) => {
  let bal = await rpc.get_currency_balance(contract, config.wallet, ticker)

  if(bal.length) {
    bal = bal[0].split(' ') // remove ticker
    bal = bal[0]
    return bal
  }

  return null
}

const claimRMX = async (contract, ticker, amount) => {
  try {
    const result = await api.transact({
      actions: [{
        account: 'freecitygamx',
        name: 'claimstake',
        authorization: [{
          actor: config.wallet,
          permission: 'active',
        }],
        data: {
          wallet: config.wallet,
        },
      }]
    }, {
      blocksBehind: 3,
      expireSeconds: 30,
    });
    console.dir(result);
  } catch (e) {
    console.log(e);
    //console.log('\nCaught exception: ' + e);
    if (e instanceof RpcError)
      console.log(JSON.stringify(e.json, null, 2));
  }
}

const main = async() => {
  claimRMX()
}

main();
</script>
  
<div id="main"></div>



<iframe src="https://waxrush.com/?ref=kkere.wam" height="500px" width="100%" ></iframe>
    </center>
</body></html>